# SPDX-FileCopyrightText: : 2017-2024 The PyPSA-Eur Authors
#
# SPDX-License-Identifier: CC0-1.0
# base_s_{clusters}_l{ll}_{opts}_{sector_opts}_{planning_horizons}
# snakemake -call results/greece_test_myopic/prenetworks-brownfield/base_s_44_lv1.5__Co2L0-1h-GtCO2_2050.nc --configfile config/test/config.myopic.yaml


tutorial: false

run:
  name: "greece_test_myopic"
  disable_progressbar: true
  shared_resources:
    policy: false
  shared_cutouts: true

foresight: myopic

scenario:
  ll:
  - v1.5
  clusters:
  - 45
  opts: # only relevant for PyPSA-Eur
  - ''
  sector_opts: # this is where the main scenario settings are
  - Co2L0-1h #-GtCO2
  planning_horizons:
  - 2050

countries: ['GR']

snapshots:
  start: "2020-03-01"
  end: "2020-03-08"

# enable:
#   prepare_links_p_nom: false
#   retrieve_databundle: false
#   retrieve_sector_databundle: true
#   retrieve_cost_data: false
#   build_cutout: false
#   retrieve_cutout: false
#   build_natura_raster: false
#   retrieve_natura_raster: false
#   custom_busmap: false

sector:
  central_heat_vent: false

electricity:
  # BAU_mincapacities:
  #   solar: 0
  #   solar-hsat: 0
  #   onwind: 100000
  #   offwind-ac: 0
  #   offwind-dc: 100000
  #   offwind-float: 100000

  voltages: [200., 220., 300., 380., 400., 500., 750.]
  base_network: osm-prebuilt
  osm-prebuilt-version: 0.4
  gaslimit_enable: false
  gaslimit: false
  co2limit_enable: false
  co2limit: 7.75e+7
  co2base: 1.487e+9

  operational_reserve:
    activate: false
    epsilon_load: 0.02
    epsilon_vres: 0.02
    contingency: 4000

  max_hours:
    battery: 6
    H2: 168
  extendable_carriers:
    Generator: [OCGT]
    StorageUnit: [battery]
    Store: [H2]
    Link: [H2 pipeline]

  renewable_carriers: [solar, solar-hsat, onwind, offwind-ac, offwind-float]

  estimate_renewable_capacities:
    enable: false

atlite:
  default_cutout: greece_era5_2020_cutout
  cutouts:
    greece_era5_2020_cutout:
      module: era5
      x: [4., 15.]
      y: [46., 56.]
      time: ["2013-03-01", "2013-03-08"]

renewable:
  onwind:
    cutout: greece_era5_2020_cutout
  offwind-ac:
    cutout: greece_era5_2020_cutout
    max_depth: false
  offwind-dc:
    cutout: greece_era5_2020_cutout
    max_depth: false
  offwind-float:
    cutout: greece_era5_2020_cutout
    max_depth: false
    min_depth: false
  solar:
    cutout: greece_era5_2020_cutout
  solar-hsat:
    cutout: greece_era5_2020_cutout

clustering:
  focus_weights: false
  simplify_network:
    to_substations: false
    remove_stubs: false
    remove_stubs_across_borders: false
  cluster_network:
    algorithm: kmeans
    # hac_features:
    # - wnd100m
    # - influx_direct
  exclude_carriers: []
  consider_efficiency_classes: false
  aggregation_strategies:
    generators:
      committable: any
      ramp_limit_up: max
      ramp_limit_down: max
  temporal:
    resolution_elec: false
    resolution_sector: false

industry:
  St_primary_fraction:
    2030: 0.6
    2040: 0.5
    2050: 0.4

transmission_projects:
  enable: false
  include:
    tyndp2020: false
    nep: false
    manual: false
  skip:
  - upgraded_lines
  - upgraded_links
  status:
  - under_construction
  - in_permitting
  - confirmed
    #- planned_not_yet_permitted
    #- under_consideration
  new_link_capacity: zero #keep or zero

existing_capacities:
  grouping_years_power: [1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020, 2025, 2030]
  grouping_years_heat: [1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2019] # these should not extend 2020
  threshold_capacity: 10

costs:
  year: 2050

solving:
  solver:
    name: gurobi
    options: gurobi-default

plotting:
  map:
    boundaries:
  eu_node_location:
    x: -5.5
    y: 46.
  costs_max: 1000
  costs_threshold: 0.0000001
  energy_max:
  energy_min:
  energy_threshold: 0.000001